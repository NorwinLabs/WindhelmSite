<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebPage">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Content Security Policy for improved security -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.clarity.ms https://store.steampowered.com https://www.youtube.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' https: data:; frame-src https://store.steampowered.com https://www.youtube.com https://trello.com; connect-src 'self' https://api.steampowered.com https://www.clarity.ms; worker-src 'self';"
    />

    <meta
      name="description"
      content="WindhelmÂ® - Epic procedurally generated story-driven RPG with dynamic quests, legendary heroes, and FREE lifetime updates. Infinite replayability where every playthrough tells a unique story. Wishlist now on Steam!"
    />
    <meta
      name="keywords"
      content="Windhelm, RPG, role playing game, adventure game, procedurally generated, story-driven, dynamic quests, narrative RPG, indie game, Steam, fantasy RPG, epic adventure, legendary heroes, infinite replayability, NorwinLabs"
    />
    <title>WindhelmÂ® - Coming to PC, PlayStation, Xbox, and Switch</title>

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#1e1b4b" />

    <!-- Favicon -->
    <link rel="icon" href="media/favicon.png" />

    <!-- Preload critical resources for optimal performance -->
    <link rel="preload" href="media/Logo.png" as="image" type="image/png" />
    <link
      rel="preload"
      href="media/islandbg.png?v=1"
      as="image"
      type="image/png"
    />

    <!-- Performance hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="//api.steampowered.com" />
    <link rel="dns-prefetch" href="//www.youtube.com" />

    <!-- Critical CSS - Minimal inline for fastest first paint -->
    <style>
      /* Minimal Critical CSS - Only above-the-fold styles */
      :root {
        --primary-color: #2563eb;
        --primary-dark: #1d4ed8;
        --white: #ffffff;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --hero-gradient-start: #1e1b4b;
        --hero-gradient-end: #312e81;
        --font-primary: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        --space-4: 1rem;
        --space-6: 1.5rem;
        --space-8: 2rem;
        --space-20: 5rem;
        --container-max-width: 1200px;
        --container-padding: 1.5rem;
        --border-radius: 0.5rem;
        --transition-base: all 0.2s ease;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        user-select: none;
      }

      html {
        scroll-behavior: smooth;
        font-size: 16px;
        scroll-padding-top: 80px;
        overflow-x: hidden;
        overflow-y: scroll;
      }

      * {
        scroll-behavior: smooth;
      }

      body {
        font-family: var(--font-primary);
        font-size: 1rem;
        line-height: 1.6;
        color: var(--gray-800);
        background: url("media/islandbg.png?v=1") repeat;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><defs><linearGradient id="bronze" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23CD7F32;stop-opacity:1" /><stop offset="30%" style="stop-color:%23B8860B;stop-opacity:1" /><stop offset="70%" style="stop-color:%23A0522D;stop-opacity:1" /><stop offset="100%" style="stop-color:%23654321;stop-opacity:1" /></linearGradient></defs><path d="M2 2 L2 18 L7 13 L10 13 L15 22 L17 21 L12 12 L15 12 L2 2 Z" fill="url(%23bronze)" stroke="%232F1B14" stroke-width="0.5"/></svg>')
            2 2,
          auto;
      }

      /* Custom Scrollbar Styles */
      ::-webkit-scrollbar {
        width: 14px;
        height: 14px;
      }

      ::-webkit-scrollbar-track {
        background: linear-gradient(
          to bottom,
          rgba(30, 27, 75, 0.3),
          rgba(49, 46, 129, 0.3)
        );
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(
          135deg,
          #cd7f32 0%,
          #b8860b 30%,
          #a0522d 70%,
          #654321 100%
        );
        border-radius: 10px;
        border: 2px solid rgba(30, 27, 75, 0.5);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
          135deg,
          #daa520 0%,
          #cd7f32 30%,
          #b8860b 70%,
          #a0522d 100%
        );
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
      }

      ::-webkit-scrollbar-thumb:active {
        background: linear-gradient(
          135deg,
          #a0522d 0%,
          #654321 30%,
          #8b4513 70%,
          #654321 100%
        );
      }

      ::-webkit-scrollbar-corner {
        background: rgba(30, 27, 75, 0.3);
      }

      /* Firefox Scrollbar */
      * {
        scrollbar-width: thin;
        scrollbar-color: #b8860b rgba(30, 27, 75, 0.3);
      }

      .container {
        max-width: var(--container-max-width);
        margin: 0 auto;
        padding: 0 var(--container-padding);
      }

      /* Header - Critical for first paint */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: url("media/islandbg.png?v=1") repeat,
          linear-gradient(rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));
        background-blend-mode: overlay;
        backdrop-filter: blur(8px);
        border-bottom: 1px solid rgba(229, 231, 235, 0.6);
        transition: var(--transition-base);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .nav-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--space-4) var(--container-padding);
        max-width: var(--container-max-width);
        margin: 0 auto;
        position: relative;
      }

      .logo img {
        height: 40px;
        width: auto;
      }

      .nav-menu {
        display: flex;
        align-items: center;
        gap: var(--space-8);
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }

      .nav-link {
        font-weight: 500;
        color: #000000;
        padding: 0.5rem 0.75rem;
        border-radius: var(--border-radius);
        transition: var(--transition-base);
        text-decoration: none;
        position: relative;
      }

      /* Hero Section - Critical above the fold */
      .hero {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          135deg,
          var(--hero-gradient-start),
          var(--hero-gradient-end)
        );
        overflow: hidden;
        scroll-snap-align: start;
      }

      .hero-content {
        position: relative;
        z-index: 10;
        text-align: center;
        color: var(--white);
        padding: var(--space-20) 0;
      }

      .hero-logo {
        max-width: 400px;
        width: 100%;
        height: auto;
      }

      /* Skip to content for accessibility */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 6px;
        background: var(--primary-color);
        color: var(--white);
        padding: 8px 16px;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 600;
        z-index: 10000;
      }

      .skip-link:focus {
        top: 6px;
        outline: 3px solid #ffcc00;
        outline-offset: 2px;
      }
    </style>

    <!-- Load full stylesheet asynchronously -->
    <link
      rel="stylesheet"
      href="styles.min.css?v=1.2"
      media="print"
      onload="this.media='all'"
    />
    <noscript><link rel="stylesheet" href="styles.min.css?v=1.2" /></noscript>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "uo1vjggwak");
    </script>
  </head>
  <body class="glass-theme">
    <!-- Navigation Header -->
    <header class="header">
      <nav class="nav" role="navigation" aria-label="Main Navigation">
        <div class="nav-container">
          <a href="#" class="logo">
            <img
              src="media/Logo.png"
              alt="Windhelm Logo"
              width="120"
              height="55"
            />
          </a>

          <div class="nav-menu" id="nav-menu">
            <a href="#home" class="nav-link">Home</a>
            <a href="#features" class="nav-link">Features</a>
            <a href="#gallery" class="nav-link">Gallery</a>
            <a href="#team" class="nav-link">Team</a>
            <a href="#contact" class="nav-link">Contact</a>
          </div>
          <div
            class="nav-overlay"
            id="nav-overlay"
            tabindex="-1"
            aria-hidden="true"
          ></div>

          <div class="social-links">
            <a
              href="https://www.youtube.com/@NorwinLabs"
              target="_blank"
              rel="noopener"
              aria-label="YouTube"
              class="social-link"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
                />
              </svg>
            </a>
            <a
              href="https://discord.gg/PgGA8Zsj4g"
              target="_blank"
              rel="noopener"
              aria-label="Discord"
              class="social-link"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.211.375-.445.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"
                />
              </svg>
            </a>
            <a
              href="https://store.steampowered.com/app/2171040/Windhelm/"
              target="_blank"
              rel="noopener"
              aria-label="Steam"
              class="social-link"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.62 20.51 6.363 24 11.979 24c6.624 0 11.979-5.354 11.979-11.979C23.958 5.354 18.603.001 11.979.001zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.66-1.353-3.015-3.015-3.015-1.665 0-3.015 1.355-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"
                />
              </svg>
            </a>
          </div>

          <button
            class="nav-toggle"
            id="nav-toggle"
            aria-label="Toggle navigation"
            aria-expanded="false"
          >
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </nav>
    </header>

    <main id="main-content">
      <!-- Hero Section -->
      <section id="home" class="hero section-animate">
        <div class="hero-background">
          <div id="youtube-background"></div>
          <div class="hero-overlay"></div>
        </div>
        <div class="hero-content">
          <h1 class="hero-title-main">
            <div class="logo-fire-container">
              <div class="fire-particles"></div>
              <img
                src="media/Logo.png"
                alt="Windhelm"
                class="hero-logo"
                fetchpriority="high"
                draggable="false"
              />
            </div>
          </h1>
          <div class="hero-subheader" aria-live="polite" aria-atomic="true">
            <span id="hero-subheader-text">Preparing your destiny...</span>
          </div>
          <p class="hero-description">
            Embark on an epic procedurally generated adventure where every
            playthrough tells a unique tale. Featuring dynamic quests, legendary
            heroes, and
            <strong style="color: #10b981">free lifetime updates forever</strong
            >.
          </p>
          <div class="hero-cta">
            <a
              href="https://store.steampowered.com/app/2171040/Windhelm/"
              class="cta-button primary"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Wishlist Windhelm on Steam"
              >ðŸŽ® Wishlist on Steam!</a
            >
            <a href="#features" class="cta-button secondary"
              >âœ¨ Discover Features</a
            >
          </div>

          <!-- Steam Widget in Hero -->
          <div class="hero-steam-widget">
            <iframe
              src="https://store.steampowered.com/widget/2171040/"
              frameborder="0"
              width="646"
              height="190"
              loading="lazy"
              style="
                max-width: 100%;
                border-radius: 12px;
                box-shadow: 0 6px 32px #000a;
                margin: 2rem auto 0 auto;
                background: #171a21;
              "
              title="Windhelm on Steam"
              allowtransparency="true"
            ></iframe>
          </div>
        </div>
      </section>

      <!-- Game Features Section -->
      <section id="features" class="features section-animate">
        <div class="container">
          <header class="section-header">
            <h2 class="section-title">Why Choose Windhelm?</h2>
            <p class="section-subtitle">
              In a time that the game industry needs it most, Windhelm reinvents
              the RPG genre by delivering an unparalleled experience that is not
              driven by profiting from players, but by immersing them in a rich,
              dynamic world where every choice matters and every adventure is
              unique.
              <strong style="color: #10b981"
                >All future content, free forever.</strong
              >
            </p>
          </header>

          <div class="features-showcase">
            <!-- Hero Feature Card -->
            <div
              class="hero-feature-card"
              style="position: relative; overflow: visible"
            >
              <style>
                .hero-feature-card {
                  position: relative;
                  background: linear-gradient(
                    135deg,
                    rgba(16, 185, 129, 0.15) 0%,
                    rgba(15, 23, 42, 0.98) 20%,
                    rgba(15, 23, 42, 0.95) 80%,
                    rgba(16, 185, 129, 0.15) 100%
                  ) !important;
                  border: 2px solid rgba(16, 185, 129, 0.3) !important;
                  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4),
                    0 0 40px rgba(16, 185, 129, 0.2),
                    inset 0 1px 0 rgba(16, 185, 129, 0.2) !important;
                }

                .hero-feature-card::after {
                  content: "";
                  position: absolute;
                  top: -2px;
                  left: -2px;
                  right: -2px;
                  bottom: -2px;
                  background: linear-gradient(
                    45deg,
                    #10b981,
                    #14b8a6,
                    #06b6d4,
                    #10b981
                  );
                  border-radius: inherit;
                  z-index: -1;
                  opacity: 0;
                  transition: opacity 0.3s ease;
                  animation: borderGlow 3s linear infinite;
                  background-size: 200% 200%;
                }

                .hero-feature-card:hover::after {
                  opacity: 0.6;
                }

                @keyframes borderGlow {
                  0% {
                    background-position: 0% 50%;
                  }
                  50% {
                    background-position: 100% 50%;
                  }
                  100% {
                    background-position: 0% 50%;
                  }
                }

                .hero-feature-icon {
                  position: relative;
                  animation: iconPulse 2s ease-in-out infinite;
                }

                @keyframes iconPulse {
                  0%,
                  100% {
                    transform: scale(1);
                    filter: drop-shadow(0 0 10px rgba(16, 185, 129, 0.5));
                  }
                  50% {
                    transform: scale(1.1);
                    filter: drop-shadow(0 0 20px rgba(16, 185, 129, 0.8));
                  }
                }

                .hero-feature-card h3 {
                  position: relative;
                  background: linear-gradient(
                    135deg,
                    #10b981,
                    #14b8a6,
                    #06b6d4
                  );
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent;
                  background-clip: text;
                  animation: titleShimmer 3s ease-in-out infinite;
                  background-size: 200% auto;
                }

                @keyframes titleShimmer {
                  0%,
                  100% {
                    background-position: 0% center;
                  }
                  50% {
                    background-position: 100% center;
                  }
                }

                .hero-feature-card .stat-number {
                  font-size: 2.5rem;
                  font-weight: 800;
                  text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
                }

                .hero-feature-stats {
                  gap: var(--space-12);
                  padding: var(--space-6);
                  background: linear-gradient(
                    135deg,
                    rgba(16, 185, 129, 0.1),
                    rgba(6, 182, 212, 0.1)
                  );
                  border-radius: var(--border-radius-lg);
                  border: 1px solid rgba(16, 185, 129, 0.2);
                  margin-top: var(--space-6);
                }

                .floating-elements {
                  position: relative;
                  filter: drop-shadow(0 0 10px rgba(16, 185, 129, 0.6));
                }

                .floating-quest,
                .floating-sword,
                .floating-magic,
                .floating-treasure {
                  font-size: 3rem;
                  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
                }
              </style>
              <div class="hero-feature-content">
                <div class="hero-feature-icon">
                  <svg
                    width="56"
                    height="56"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                      stroke="url(#heroGradient)"
                      stroke-width="2"
                      fill="url(#heroGradientFill)"
                      opacity="0.2"
                    />
                    <path
                      d="M8 12L11 15L16 9"
                      stroke="url(#heroGradient)"
                      stroke-width="3"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M12 2V6M12 18V22M22 12H18M6 12H2"
                      stroke="url(#heroGradient)"
                      stroke-width="2"
                      stroke-linecap="round"
                    />
                    <defs>
                      <linearGradient
                        id="heroGradient"
                        x1="0%"
                        y1="0%"
                        x2="100%"
                        y2="100%"
                      >
                        <stop offset="0%" style="stop-color: #10b981" />
                        <stop offset="50%" style="stop-color: #14b8a6" />
                        <stop offset="100%" style="stop-color: #06b6d4" />
                      </linearGradient>
                      <linearGradient
                        id="heroGradientFill"
                        x1="0%"
                        y1="0%"
                        x2="100%"
                        y2="100%"
                      >
                        <stop offset="0%" style="stop-color: #10b981" />
                        <stop offset="100%" style="stop-color: #06b6d4" />
                      </linearGradient>
                    </defs>
                  </svg>
                </div>
                <h3>Free Lifetime Updates Forever</h3>
                <p style="font-size: 1.15rem; line-height: 1.8">
                  <strong>Buy once, enjoy forever!</strong> Every future update,
                  expansion, feature, and content drop is
                  <strong
                    style="
                      color: #10b981;
                      font-size: 1.25rem;
                      text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
                    "
                    >100% FREE</strong
                  >.
                  <span
                    style="
                      background: linear-gradient(
                        135deg,
                        rgba(16, 185, 129, 0.2),
                        rgba(6, 182, 212, 0.2)
                      );
                      padding: 0.2em 0.5em;
                      border-radius: 4px;
                      border: 1px solid rgba(16, 185, 129, 0.3);
                    "
                  >
                    Zero hidden costs. Zero subscriptions. Zero
                    microtransactions.
                  </span>
                  <br /><br />
                  We're committed to continuously improving and expanding
                  Windhelm for years to come -
                  <em style="color: #14b8a6"
                    >all included in your single purchase!</em
                  >
                </p>
                <div class="hero-feature-stats">
                  <div class="stat">
                    <span
                      class="stat-number"
                      style="
                        background: linear-gradient(135deg, #10b981, #14b8a6);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                      "
                      >FREE</span
                    >
                    <span class="stat-label">All Updates</span>
                  </div>
                  <div class="stat">
                    <span
                      class="stat-number"
                      style="
                        background: linear-gradient(135deg, #14b8a6, #06b6d4);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                      "
                      >âˆž</span
                    >
                    <span class="stat-label">Lifetime Support</span>
                  </div>
                  <div class="stat">
                    <span
                      class="stat-number"
                      style="
                        background: linear-gradient(135deg, #06b6d4, #10b981);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                      "
                      >$0</span
                    >
                    <span class="stat-label">Extra Costs</span>
                  </div>
                </div>
              </div>
              <div class="hero-feature-visual">
                <div class="floating-elements">
                  <div class="floating-quest"></div>
                  <div class="floating-sword"></div>
                  <div class="floating-magic"></div>
                  <div class="floating-treasure"></div>
                </div>
              </div>
            </div>

            <!-- Feature Cards Grid -->
            <div class="features-grid-modern">
              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M3 7V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V7M3 7V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V7M3 7H21M12 11V17M9 14H15"
                        stroke="url(#worldGradient)"
                        stroke-width="2"
                        stroke-linecap="round"
                      />
                      <defs>
                        <linearGradient
                          id="worldGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #8b5cf6" />
                          <stop offset="100%" style="stop-color: #ec4899" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Dynamic World Building</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/world-building.gif"
                    alt="Dynamic World Building"
                    loading="lazy"
                  />
                </div>
                <p>
                  Explore procedurally generated landscapes that evolve with
                  your choices. From mystical forests to ancient ruins, every
                  location tells a unique story.
                </p>
                <div class="feature-accent"></div>
              </div>

              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                        stroke="url(#characterGradient)"
                        stroke-width="2"
                      />
                      <path
                        d="M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"
                        stroke="url(#characterGradient)"
                        stroke-width="2"
                      />
                      <defs>
                        <linearGradient
                          id="characterGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #f59e0b" />
                          <stop offset="100%" style="stop-color: #ef4444" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Deep Character Development</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/character-development.gif"
                    alt="Deep Character Development"
                    loading="lazy"
                  />
                </div>
                <p>
                  Craft legendary heroes with extensive customization options.
                  Master unique abilities, forge powerful equipment, and shape
                  your destiny through meaningful choices.
                </p>
                <div class="feature-accent"></div>
              </div>

              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                        stroke="url(#combatGradient)"
                        stroke-width="2"
                      />
                      <defs>
                        <linearGradient
                          id="combatGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #dc2626" />
                          <stop offset="100%" style="stop-color: #7c3aed" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Strategic Combat System</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/combat-system.gif"
                    alt="Strategic Combat System"
                    loading="lazy"
                  />
                </div>
                <p>
                  Engage in combat that rewards planning and skill. Master
                  timing, positioning, and elements of the environment to
                  overcome challenging encounters.
                </p>
                <div class="feature-accent"></div>
              </div>

              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4.318 6.318C3.90009 6.73584 3.56862 7.23139 3.34254 7.7777C3.11645 8.32401 3 8.90803 3 9.5C3 10.0919 3.11645 10.676 3.34254 11.2223C3.56862 11.7686 3.90009 12.2642 4.318 12.682L12 20.364L19.682 12.682C20.5265 11.8385 21 10.6935 21 9.5C21 8.30653 20.5265 7.16149 19.682 6.318C18.8385 5.47353 17.6935 5 16.5 5C15.3065 5 14.1615 5.47353 13.318 6.318L12 7.636L10.682 6.318C10.2642 5.90009 9.76861 5.56862 9.2223 5.34254C8.67599 5.11645 8.09197 5 7.5 5C6.90803 5 6.32401 5.11645 5.7777 5.34254C5.23139 5.56862 4.73584 5.90009 4.318 6.318Z"
                        stroke="url(#storyGradient)"
                        stroke-width="2"
                      />
                      <defs>
                        <linearGradient
                          id="storyGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #06b6d4" />
                          <stop offset="100%" style="stop-color: #3b82f6" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Story-Driven Experience</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/story-experience.gif"
                    alt="Story-Driven Experience"
                    loading="lazy"
                  />
                </div>
                <p>
                  Every decision matters in our narrative-focused gameplay.
                  Experience branching storylines, memorable characters, and
                  emotionally impactful moments.
                </p>
                <div class="feature-accent"></div>
              </div>

              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M17 20H7C5.89543 20 5 19.1046 5 18V9C5 7.89543 5.89543 7 7 7H17C18.1046 7 19 7.89543 19 9V18C19 19.1046 18.1046 20 17 20Z"
                        stroke="url(#indieGradient)"
                        stroke-width="2"
                      />
                      <path
                        d="M12 3V7M9 4V6M15 4V6"
                        stroke="url(#indieGradient)"
                        stroke-width="2"
                        stroke-linecap="round"
                      />
                      <defs>
                        <linearGradient
                          id="indieGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #10b981" />
                          <stop offset="100%" style="stop-color: #059669" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Indie Development Team</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/indie-craftsmanship.gif"
                    alt="Indie Craftsmanship"
                    loading="lazy"
                  />
                </div>
                <p>
                  Lovingly crafted by a passionate husband-wife team. We
                  prioritize meaningful gameplay over flashy graphics, focusing
                  on authentic RPG experiences.
                </p>
                <div class="feature-accent"></div>
              </div>

              <div class="feature-card-modern">
                <div class="feature-card-header">
                  <div class="feature-icon">
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M17 20H7C5.89543 20 5 19.1046 5 18V9C5 7.89543 5.89543 7 7 7H17C18.1046 7 19 7.89543 19 9V18C19 19.1046 18.1046 20 17 20Z"
                        stroke="url(#communityGradient)"
                        stroke-width="2"
                      />
                      <path
                        d="M9 12L11 14L15 10"
                        stroke="url(#communityGradient)"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <defs>
                        <linearGradient
                          id="communityGradient"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop offset="0%" style="stop-color: #f97316" />
                          <stop offset="100%" style="stop-color: #ea580c" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <h4>Community Connection</h4>
                </div>
                <!-- Add your gif/video here -->
                <div class="feature-visual" style="display: none">
                  <img
                    src="media/features/community-connection.gif"
                    alt="Community Connection"
                    loading="lazy"
                  />
                </div>
                <p>
                  Join our growing community of RPG enthusiasts. Share your
                  stories, provide feedback, and help shape the future of
                  Windhelm together.
                </p>
                <div class="feature-accent"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Game Updates Section -->
      <section id="updates" class="game-updates section-animate">
        <div class="container">
          <div class="updates-container">
            <div class="updates-header">
              <h2>Latest Game Updates</h2>
              <p style="color: var(--gray-600); margin: 0">
                Latest development updates and changelogs from Steam
              </p>
            </div>

            <!-- Loading State -->
            <div class="updates-loading" id="updates-loading">
              <div class="updates-spinner"></div>
              <h3>Loading Updates...</h3>
              <p style="color: var(--gray-600)">
                Fetching latest changes from Steam
              </p>
            </div>

            <!-- Updates List -->
            <div
              class="updates-list"
              id="updates-list"
              style="display: none"
            ></div>

            <!-- Error State -->
            <div class="updates-error" id="updates-error" style="display: none">
              <h3>ðŸ“¡ Unable to Load Updates</h3>
              <p>
                We're having trouble connecting to Steam right now. Please check
                back later or visit our Steam page directly.
              </p>
              <a
                href="https://store.steampowered.com/app/2171040"
                class="steam-link"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="View Windhelm on Steam Store"
              >
                <div class="steam-icon">S</div>
                View on Steam Store
              </a>
            </div>

            <!-- Fallback container (empty unless real Steam data fails to load) -->
            <div
              class="updates-fallback"
              id="updates-fallback"
              style="display: none"
            ></div>

            <div style="text-align: center; margin-top: 1.5rem">
              <a
                href="https://store.steampowered.com/app/2171040"
                class="steam-link"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="View all updates on Steam"
              >
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Roadmap Section -->
      <section id="roadmap" class="roadmap section-animate">
        <div class="container">
          <header class="section-header">
            <h2 class="section-title">Development Board</h2>
            <p class="section-subtitle">
              Track our progress in real-time - we build in public!
            </p>
          </header>

          <div id="trello-embed-container">
            <iframe
              id="trello-embed"
              class="trello-embed"
              title="Windhelm Roadmap"
              style="display: none"
            ></iframe>
            <div id="trello-fallback" class="trello-fallback">
              <p style="margin-bottom: var(--space-6)">
                Set your Trello board shortlink to display the roadmap here.
              </p>
              <a
                id="trello-open-link"
                href="#"
                target="_blank"
                rel="noopener"
                class="cta-button"
              >
                Open Roadmap on Trello
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Media Gallery Section -->
      <section id="gallery" class="gallery section-animate">
        <style>
          .gallery {
            padding: var(--space-20) 0;
            background-image: url("media/islandbg.png?v=1"),
              linear-gradient(rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.95));
            background-repeat: repeat, no-repeat;
            background-size: auto, cover;
            background-position: 0 0, 0 0;
            background-blend-mode: overlay;
            backdrop-filter: blur(10px);
            position: relative;
            animation: islandPan 60s linear infinite;
          }

          .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: var(--space-8);
          }

          .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: var(--border-radius-lg);
            cursor: pointer;
            aspect-ratio: 16/9;
            background: linear-gradient(
              135deg,
              rgba(30, 41, 59, 0.85),
              rgba(17, 24, 39, 0.8)
            );
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
          }

          .gallery-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
            border-color: rgba(255, 255, 255, 0.15);
          }

          .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
          }

          .gallery-item:hover img {
            transform: scale(1.05);
          }

          .gallery-item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(
              to top,
              rgba(0, 0, 0, 0.9) 0%,
              rgba(0, 0, 0, 0.6) 50%,
              transparent 100%
            );
            color: white;
            padding: 1rem;
            transform: translateY(0);
            transition: transform 0.3s ease;
          }

          .gallery-item-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
          }

          .gallery-item-caption {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin: 0.25rem 0 0 0;
          }

          /* Lightbox Styles */
          .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
          }

          .lightbox.active {
            display: flex;
          }

          .lightbox-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            animation: lightboxZoomIn 0.3s ease;
          }

          @keyframes lightboxZoomIn {
            from {
              transform: scale(0.8);
              opacity: 0;
            }
            to {
              transform: scale(1);
              opacity: 1;
            }
          }

          .lightbox-image {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
          }

          .lightbox-caption {
            text-align: center;
            color: white;
            margin-top: 1rem;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
          }

          .lightbox-close {
            position: absolute;
            top: -3rem;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
          }

          .lightbox-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
          }

          .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
          }

          .lightbox-nav:hover {
            background: rgba(255, 255, 255, 0.2);
          }

          .lightbox-prev {
            left: -5rem;
          }

          .lightbox-next {
            right: -5rem;
          }

          @media (max-width: 768px) {
            .gallery-grid {
              grid-template-columns: 1fr;
              gap: 1rem;
            }

            .lightbox {
              padding: 1rem;
            }

            .lightbox-nav {
              display: none;
            }

            .lightbox-close {
              top: 1rem;
              right: 1rem;
            }
          }
        </style>

        <div class="container">
          <header class="section-header">
            <h2 class="section-title">Gallery</h2>
            <p class="section-subtitle">
              Explore the breathtaking world of Windhelm through stunning
              screenshots and artwork
            </p>
          </header>

          <div class="gallery-grid">
            <div class="gallery-item" data-index="0">
              <img
                src="media/Grasslandoverlook1.png"
                alt="Grassland Overlook"
                loading="lazy"
              />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Grassland Overlook</h3>
                <p class="gallery-item-caption">
                  A serene view across the rolling hills
                </p>
              </div>
            </div>

            <div class="gallery-item" data-index="1">
              <img src="media/2.png" alt="Game Screenshot 2" loading="lazy" />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Epic Adventure</h3>
                <p class="gallery-item-caption">
                  Journey through mystical landscapes
                </p>
              </div>
            </div>

            <div class="gallery-item" data-index="2">
              <img src="media/3.png" alt="Game Screenshot 3" loading="lazy" />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Dynamic Encounters</h3>
                <p class="gallery-item-caption">
                  Every playthrough brings new challenges
                </p>
              </div>
            </div>

            <div class="gallery-item" data-index="3">
              <img src="media/4.png" alt="Game Screenshot 4" loading="lazy" />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Rich Environments</h3>
                <p class="gallery-item-caption">
                  Immersive world-building at its finest
                </p>
              </div>
            </div>

            <div class="gallery-item" data-index="4">
              <img src="media/5.png" alt="Game Screenshot 5" loading="lazy" />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Story-Driven Gameplay</h3>
                <p class="gallery-item-caption">
                  Your choices shape the narrative
                </p>
              </div>
            </div>

            <div class="gallery-item" data-index="5">
              <img
                src="media/1920x622CenteredLogo.jpg"
                alt="Windhelm Banner"
                loading="lazy"
              />
              <div class="gallery-item-overlay">
                <h3 class="gallery-item-title">Windhelm</h3>
                <p class="gallery-item-caption">An epic RPG adventure awaits</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Lightbox -->
        <div class="lightbox" id="lightbox">
          <div class="lightbox-content">
            <button
              class="lightbox-close"
              id="lightbox-close"
              aria-label="Close lightbox"
            >
              Ã—
            </button>
            <button
              class="lightbox-nav lightbox-prev"
              id="lightbox-prev"
              aria-label="Previous image"
            >
              â€¹
            </button>
            <img src="" alt="" class="lightbox-image" id="lightbox-image" />
            <button
              class="lightbox-nav lightbox-next"
              id="lightbox-next"
              aria-label="Next image"
            >
              â€º
            </button>
            <div class="lightbox-caption" id="lightbox-caption"></div>
          </div>
        </div>

        <script>
          // Gallery Lightbox Functionality
          (function () {
            const galleryItems = document.querySelectorAll(".gallery-item");
            const lightbox = document.getElementById("lightbox");
            const lightboxImage = document.getElementById("lightbox-image");
            const lightboxCaption = document.getElementById("lightbox-caption");
            const lightboxClose = document.getElementById("lightbox-close");
            const lightboxPrev = document.getElementById("lightbox-prev");
            const lightboxNext = document.getElementById("lightbox-next");
            let currentIndex = 0;

            const galleryData = Array.from(galleryItems).map((item) => ({
              src: item.querySelector("img").src,
              alt: item.querySelector("img").alt,
              title:
                item.querySelector(".gallery-item-title")?.textContent || "",
              caption:
                item.querySelector(".gallery-item-caption")?.textContent || "",
            }));

            function openLightbox(index) {
              currentIndex = index;
              updateLightboxContent();
              lightbox.classList.add("active");
              document.body.style.overflow = "hidden";
            }

            function closeLightbox() {
              lightbox.classList.remove("active");
              document.body.style.overflow = "";
            }

            function updateLightboxContent() {
              const item = galleryData[currentIndex];
              lightboxImage.src = item.src;
              lightboxImage.alt = item.alt;
              lightboxCaption.innerHTML = `<strong>${item.title}</strong><br>${item.caption}`;
            }

            function showNext() {
              currentIndex = (currentIndex + 1) % galleryData.length;
              updateLightboxContent();
            }

            function showPrev() {
              currentIndex =
                (currentIndex - 1 + galleryData.length) % galleryData.length;
              updateLightboxContent();
            }

            // Event listeners
            galleryItems.forEach((item, index) => {
              item.addEventListener("click", () => openLightbox(index));
              item.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") {
                  e.preventDefault();
                  openLightbox(index);
                }
              });
              item.setAttribute("tabindex", "0");
              item.setAttribute("role", "button");
            });

            lightboxClose.addEventListener("click", closeLightbox);
            lightboxNext.addEventListener("click", showNext);
            lightboxPrev.addEventListener("click", showPrev);

            // Close on background click
            lightbox.addEventListener("click", (e) => {
              if (e.target === lightbox) {
                closeLightbox();
              }
            });

            // Keyboard navigation
            document.addEventListener("keydown", (e) => {
              if (!lightbox.classList.contains("active")) return;

              switch (e.key) {
                case "Escape":
                  closeLightbox();
                  break;
                case "ArrowRight":
                  showNext();
                  break;
                case "ArrowLeft":
                  showPrev();
                  break;
              }
            });
          })();
        </script>
      </section>

      <!-- Team Section -->
      <section id="team" class="team section-animate">
        <div class="container">
          <header class="section-header">
            <h2 class="section-title">The Dynamic Duo</h2>
            <p class="section-subtitle">
              + Arkyn ðŸ‘¶, Luna ðŸ¶, Stella ðŸ¶, and Neptune ðŸ˜º
            </p>
          </header>

          <div class="team-grid">
            <article class="team-member">
              <div class="member-image">
                <picture>
                  <!-- Modern formats (ready for optimization) -->
                  <!-- <source srcset="images/Gavin1.webp" type="image/webp" /> -->
                  <!-- Current working image -->
                  <img
                    src="media/Gavin1.jpg"
                    alt="Gavin Norwood"
                    loading="lazy"
                    decoding="async"
                    draggable="false"
                  />
                </picture>
              </div>
              <div class="member-info">
                <h3>Gavin Norwood</h3>
                <p class="member-role">Creator / Developer</p>
              </div>
            </article>

            <article class="team-member">
              <div class="member-image">
                <picture>
                  <!-- Modern formats (ready for optimization) -->
                  <!-- <source srcset="images/Kirstenjpg1.webp" type="image/webp" /> -->
                  <!-- Current working image -->
                  <img
                    src="media/Kirstenjpg1.jpg"
                    alt="Kirsten Norwood"
                    loading="lazy"
                    decoding="async"
                    draggable="false"
                  />
                </picture>
              </div>
              <div class="member-info">
                <h3>Kirsten Norwood</h3>
                <p class="member-role">Level Designer / Writer</p>
              </div>
            </article>
          </div>

          <div class="supporters">
            <h3>Early Backers / Patrons</h3>
            <p><span class="supporter-name">Cody Palmer</span></p>
          </div>
        </div>
      </section>

      <!-- Contact Section -->
      <section id="contact" class="contact section-animate">
        <script>
          // Smooth scroll - no pop-in animations
          document.addEventListener("DOMContentLoaded", function () {
            // Sections are now always visible for smoother experience
            const animatedSections =
              document.querySelectorAll(".section-animate");
            animatedSections.forEach((section) => {
              section.classList.add("visible");
            });
          });
        </script>
        <div class="container">
          <header class="section-header">
            <h2 class="section-title">Let's Connect</h2>
            <p class="section-subtitle">
              Join our growing community! Have questions? Want early access
              news? We'd love to hear from you!
            </p>
          </header>

          <div class="contact-grid">
            <!-- Contact Info Cards -->
            <div class="contact-info">
              <div class="contact-card">
                <div class="contact-card-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"
                      fill="#5865F2"
                    />
                  </svg>
                </div>
                <h3 class="contact-card-title">Join Our Discord</h3>
                <p class="contact-card-text">
                  Connect with our community, get live updates, and chat with
                  the developers!
                </p>
                <a
                  href="https://discord.gg/PgGA8Zsj4g"
                  class="contact-card-link"
                  target="_blank"
                >
                  Join Discord
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7 17L17 7M17 7H7M17 7V17"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>

              <div class="contact-card">
                <div class="contact-card-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
                      fill="#FF0000"
                    />
                  </svg>
                </div>
                <h3 class="contact-card-title">YouTube Channel</h3>
                <p class="contact-card-text">
                  Watch development vlogs, gameplay previews, and
                  behind-the-scenes content!
                </p>
                <a
                  href="https://www.youtube.com/@NorwinLabs"
                  class="contact-card-link"
                  target="_blank"
                >
                  Watch Videos
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7 17L17 7M17 7H7M17 7V17"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>

              <div class="contact-card">
                <div class="contact-card-icon">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                      fill="#00D924"
                    />
                  </svg>
                </div>
                <h3 class="contact-card-title">Wishlist on Steam</h3>
                <p class="contact-card-text">
                  Add Windhelm to your Steam wishlist to get notified when we
                  launch!
                </p>
                <a
                  href="https://store.steampowered.com/app/2171040/Windhelm/"
                  class="contact-card-link"
                  target="_blank"
                >
                  Wishlist Now
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M7 17L17 7M17 7H7M17 7V17"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-container">
              <div class="contact-form-header">
                <h3>Send us a Message</h3>
                <p>Got a specific question or feedback? Drop us a line!</p>
              </div>

              <form
                class="contact-form"
                id="contact-form"
                action="https://forms.nicepagesrv.com/v2/form/process"
                method="POST"
              >
                <div class="form-group">
                  <label for="name">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Your Name
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder="Enter your name"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="email">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <polyline
                        points="22,6 12,13 2,6"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Email Address
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="your.email@example.com"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="message">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                    Your Message
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    rows="5"
                    placeholder="Tell us about your thoughts, questions, or feedback..."
                    required
                  ></textarea>
                </div>

                <div class="form-group checkbox-group">
                  <input type="checkbox" id="agree" name="agree" required />
                  <label for="agree" class="checkbox-label">
                    I accept the
                    <a href="#" class="terms-link">Terms of Service</a> and
                    <a href="#" class="terms-link">Privacy Policy</a>
                  </label>
                </div>

                <button type="submit" class="submit-button">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                  Send Message
                </button>

                <input
                  type="hidden"
                  name="formServices"
                  value="fd87cc1f-cce2-e1b0-f874-071208ba58c1"
                />
                <input
                  type="hidden"
                  name="siteKey"
                  value="6LcIF7AqAAAAANPHfgAYi7su81ChnUac3zICzAc0"
                />
                <input type="hidden" name="recaptchaResponse" value="" />
              </form>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-brand">
            <img src="media/Logo.png" alt="Windhelm Logo" class="footer-logo" />
            <p>Â©2025 NorwinLabs LLC. All rights reserved.</p>
          </div>
          <div class="footer-version">
            <p>v1.2.2</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <!-- YouTube iframe API -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
      // Roadmap (Trello) embed configuration
      // Set this to your Trello board shortlink (the code in the board URL)
      // Example board URL: https://trello.com/b/ABCD1234/your-board
      // Set: const TRELLO_BOARD_SHORTLINK = "ABCD1234";
      const TRELLO_BOARD_SHORTLINK = "mMhnJ4im"; // TODO: set your board shortlink

      document.addEventListener("DOMContentLoaded", function () {
        const iframe = document.getElementById("trello-embed");
        const fallback = document.getElementById("trello-fallback");
        const openLink = document.getElementById("trello-open-link");

        if (TRELLO_BOARD_SHORTLINK && iframe && fallback && openLink) {
          const trelloUrl = `https://trello.com/b/${TRELLO_BOARD_SHORTLINK}.html?menu=hide`;
          iframe.src = trelloUrl;
          iframe.style.display = "block";
          fallback.style.display = "none";
          openLink.href = trelloUrl;
        } else if (openLink) {
          openLink.href = "https://trello.com/";
        }
      });

      // YouTube Background Video Configuration
      const YOUTUBE_VIDEO_ID = "gZdP3WCZJc8"; // Replace with your YouTube video ID

      let player;
      let useLocalFallback = false;

      // This function will be called by YouTube API when ready
      function onYouTubeIframeAPIReady() {
        player = new YT.Player("youtube-background", {
          videoId: YOUTUBE_VIDEO_ID,
          playerVars: {
            autoplay: 1,
            controls: 0,
            showinfo: 0,
            modestbranding: 1,
            loop: 1,
            fs: 0,
            cc_load_policy: 0,
            iv_load_policy: 3,
            autohide: 1,
            mute: 1,
            playlist: YOUTUBE_VIDEO_ID, // Required for looping
            enablejsapi: 1,
            origin: window.location.origin,
          },
          events: {
            onReady: onPlayerReady,
            onStateChange: onPlayerStateChange,
            onError: onPlayerError,
          },
        });
      }

      function onPlayerReady(event) {
        event.target.mute();
        event.target.setVolume(0);
        event.target.playVideo();
      }

      function onPlayerStateChange(event) {
        // Loop video when it ends
        if (event.data === YT.PlayerState.ENDED) {
          player.playVideo();
        }
      }

      function onPlayerError(event) {
        // Error codes: 2=invalid ID, 5=HTML5 error, 100=not found, 101/150=embedding disabled
        console.warn("YouTube player error:", event.data);

        // If embedding is restricted (error 101, 150, or 153), fallback to image
        if (event.data === 101 || event.data === 150 || event.data === 153) {
          loadImageFallback();
        }
      }

      function loadImageFallback() {
        if (useLocalFallback) return; // Already switched
        useLocalFallback = true;

        const container = document.getElementById("youtube-background");
        if (!container) return;

        // Replace with Windhelm image
        container.innerHTML = `
          <img
            src="media/WindhelmYoutubeBanner.jpg"
            alt="Windhelm"
            style="position: absolute; top: 50%; left: 50%; width: 100vw; height: 100vh; transform: translate(-50%, -50%); object-fit: cover; pointer-events: none;"
          />
        `;

        console.info("Switched to image fallback due to YouTube error 153");
      }

      // Removed delayed font loading to avoid FOUT/pop

      // Image loading optimization
      function optimizeImages() {
        // Preload visible images
        const images = document.querySelectorAll('img[loading="lazy"]');
        const imageObserver = new IntersectionObserver(
          (entries, observer) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                const img = entry.target;
                // Add loading fade effect
                img.style.transition = "opacity 0.3s ease";
                img.style.opacity = "0";

                img.onload = function () {
                  this.style.opacity = "1";
                };

                observer.unobserve(img);
              }
            });
          },
          {
            rootMargin: "50px",
          }
        );

        images.forEach((img) => imageObserver.observe(img));

        // Prefetch next section images on scroll
        let prefetched = new Set();
        window.addEventListener("scroll", () => {
          const scrolled = window.scrollY;
          const windowHeight = window.innerHeight;
          const documentHeight = document.documentElement.scrollHeight;

          // Prefetch team images when halfway down
          if (scrolled > documentHeight * 0.5 && !prefetched.has("team")) {
            const teamImages = ["media/Gavin1.jpg", "media/Kirstenjpg1.jpg"];
            teamImages.forEach((src) => {
              const link = document.createElement("link");
              link.rel = "prefetch";
              link.href = src;
              document.head.appendChild(link);
            });
            prefetched.add("team");
          }
        });
      }

      // Initialize image optimization
      if ("IntersectionObserver" in window) {
        document.addEventListener("DOMContentLoaded", optimizeImages);
      }
    </script>
    <script src="script.min.js?v=1.2" defer></script>

    <!-- Form success/error messages -->
    <div id="form-messages" class="form-messages" style="display: none">
      <div class="form-success" id="form-success">
        Thank you! Your message has been sent.
      </div>
      <div class="form-error" id="form-error">
        Unable to send your message. Please try again.
      </div>
    </div>
    <script>
      // ===== FORCE CACHE REFRESH ON EVERY VISIT =====
      const SITE_VERSION = "1.0.0";

      // Clear all caches on every page load
      if ("caches" in window) {
        caches.keys().then((names) => {
          names.forEach((name) => caches.delete(name));
        });
      }

      // Check if this is a fresh load (not from cache)
      const perfEntries = performance.getEntriesByType("navigation");
      if (perfEntries.length > 0 && perfEntries[0].type === "back_forward") {
        // User navigated back, force reload
        window.location.reload(true);
      }

      console.log(
        `Windhelm site loaded successfully! Version: ${SITE_VERSION}`
      );

      // ===== FIRE PARTICLES FOR LOGO =====
      function createFireParticles() {
        const fireContainer = document.querySelector(".fire-particles");
        if (!fireContainer) return;

        // Create multiple fire particles
        for (let i = 0; i < 12; i++) {
          const particle = document.createElement("div");
          particle.className = "fire-particle";

          // Random horizontal position
          const xPos = 10 + Math.random() * 80;
          particle.style.left = `${xPos}%`;

          // Random animation delay
          const delay = Math.random() * 2;
          particle.style.animationDelay = `${delay}s`;

          // Random horizontal drift
          particle.style.setProperty(
            "--particle-x",
            `${(Math.random() - 0.5) * 40}px`
          );

          fireContainer.appendChild(particle);
        }
      }

      // Initialize fire particles when DOM is ready
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", createFireParticles);
      } else {
        createFireParticles();
      }

      // ===== MOBILE NAVIGATION =====
      const navToggle = document.getElementById("nav-toggle");
      const navMenu = document.getElementById("nav-menu");

      if (navToggle && navMenu) {
        navToggle.addEventListener("click", function () {
          navToggle.classList.toggle("active");
          navMenu.classList.toggle("active");
          const expanded = navToggle.getAttribute("aria-expanded") === "true";
          navToggle.setAttribute("aria-expanded", !expanded);
        });

        // Close mobile menu when clicking on nav links
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.addEventListener("click", function () {
            navToggle.classList.remove("active");
            navMenu.classList.remove("active");
            navToggle.setAttribute("aria-expanded", "false");
          });
        });
      }

      // ===== EXPANDABLE FEATURE CARDS =====
      function initializeExpandableFeatures() {
        const featureCards = document.querySelectorAll(".feature-card-overlay");

        featureCards.forEach((card) => {
          card.addEventListener("click", function (e) {
            e.preventDefault();

            // Close other expanded cards first
            featureCards.forEach((otherCard) => {
              if (
                otherCard !== card &&
                otherCard.classList.contains("expanded")
              ) {
                otherCard.classList.remove("expanded");
                otherCard.setAttribute("aria-expanded", "false");
              }
            });

            // Toggle current card
            this.classList.toggle("expanded");
            this.setAttribute(
              "aria-expanded",
              this.classList.contains("expanded")
            );

            // Add extra leaves when expanding
            if (this.classList.contains("expanded")) {
              const rect = this.getBoundingClientRect();
              const centerX = rect.left + rect.width / 2;
              const centerY = rect.top + rect.height / 2;

              // Create extra celebration leaves
              for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                  createLeaf(centerX, centerY, true);
                }, i * 100);
              }
            }
          });

          // Keyboard support
          card.addEventListener("keydown", function (e) {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              this.click();
            }
          });

          // Accessibility
          card.setAttribute("tabindex", "0");
          card.setAttribute("role", "button");
          card.setAttribute("aria-expanded", "false");

          const title = card.querySelector("h3");
          if (title) {
            card.setAttribute(
              "aria-label",
              `Expand details for ${title.textContent}`
            );
          }
        });
      }

      // ===== SMOOTH SCROLLING =====
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // ===== ACTIVE NAVIGATION HIGHLIGHTING =====
      function setActiveNav() {
        const sections = document.querySelectorAll("section[id]");
        const navLinks = document.querySelectorAll(".nav-link");

        let current = "";
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (scrollY >= sectionTop - 200) {
            current = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === "#" + current) {
            link.classList.add("active");
          }
        });
      }

      window.addEventListener("scroll", setActiveNav);

      // ===== EMAIL TOGGLE =====
      const toggleEmail = document.getElementById("toggle-email");
      if (toggleEmail) {
        toggleEmail.addEventListener("click", function () {
          const collapse = document.getElementById("email-collapse");
          if (collapse) {
            collapse.style.display =
              collapse.style.display === "none" ? "block" : "none";
          }
        });
      }

      // ===== CONTACT FORM =====
      const contactForm = document.getElementById("contact-form");
      const formSuccess = document.getElementById("form-success");

      if (contactForm && formSuccess) {
        contactForm.addEventListener("submit", function (e) {
          e.preventDefault();

          // Show success message
          formSuccess.style.display = "block";

          // Hide success message after 5 seconds
          setTimeout(() => {
            formSuccess.style.display = "none";
          }, 5000);

          // Reset form
          contactForm.reset();
        });
      }

      // ===== INITIALIZATION =====
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Initializing Windhelm site features...");
        initializeExpandableFeatures();
        setActiveNav();
        console.log("âœ¨ Windhelm site ready! Click anywhere for leaves! ðŸƒ");
      });

      // Initialize immediately if DOM already loaded
      if (document.readyState !== "loading") {
        console.log("DOM already loaded, initializing immediately...");
        initializeExpandableFeatures();
        setActiveNav();
        console.log("âœ¨ Windhelm site ready! Click anywhere for leaves! ðŸƒ");
      }

      // ===== DISCORD WIDGET HANDLING =====
      function handleDiscordLoad() {
        console.log("Discord widget loaded successfully!");
        const loading = document.getElementById("discord-loading");
        const widget = document.getElementById("discord-widget");
        const fallback = document.getElementById("discord-fallback");

        if (loading) loading.style.display = "none";
        if (widget) widget.style.display = "block";
        if (fallback) fallback.style.display = "none";
      }

      function handleDiscordError() {
        console.log("Discord widget failed to load, showing fallback");
        const loading = document.getElementById("discord-loading");
        const widget = document.getElementById("discord-widget");
        const fallback = document.getElementById("discord-fallback");

        if (loading) loading.style.display = "none";
        if (widget) widget.style.display = "none";
        if (fallback) fallback.style.display = "flex";
      }

      // Timeout fallback in case iframe never triggers load/error events
      setTimeout(() => {
        const loading = document.getElementById("discord-loading");
        const widget = document.getElementById("discord-widget");
        const fallback = document.getElementById("discord-fallback");

        if (loading && loading.style.display !== "none") {
          console.log("Discord widget timed out, showing fallback");
          loading.style.display = "none";
          if (fallback) fallback.style.display = "flex";
        }
      }, 10000); // 10 second timeout

      // ===== STEAM UPDATES SYSTEM (Steam News API) =====
      async function loadSteamUpdates() {
        console.log("Loading Steam news updates...");
        const loadingEl = document.getElementById("updates-loading");
        const listEl = document.getElementById("updates-list");
        const errorEl = document.getElementById("updates-error");
        const fallbackEl = document.getElementById("updates-fallback");

        // Check cache first (30 minute TTL)
        const CACHE_KEY = "steam-news-cache";
        const CACHE_TTL = 30 * 60 * 1000; // 30 minutes

        try {
          const cached = localStorage.getItem(CACHE_KEY);
          if (cached) {
            const { data, timestamp } = JSON.parse(cached);
            if (Date.now() - timestamp < CACHE_TTL) {
              console.log("Using cached Steam news data");
              displaySteamUpdates(data);
              return;
            }
          }

          const steamAppId = "2171040";
          const newsUrl = `https://api.steampowered.com/ISteamNews/GetNewsForApp/v0002/?appid=${steamAppId}&count=5&maxlength=1200&format=json`;
          const proxyUrl = "https://api.allorigins.win/get?url=";
          const fullUrl = `${proxyUrl}${encodeURIComponent(newsUrl)}`;
          console.log("Fetching Steam news from:", fullUrl);

          const response = await fetch(fullUrl);
          const proxyData = await response.json();
          const newsData = JSON.parse(proxyData.contents);

          if (
            newsData &&
            newsData.appnews &&
            newsData.appnews.newsitems &&
            newsData.appnews.newsitems.length > 0
          ) {
            const updates = newsData.appnews.newsitems.map((item) => ({
              title: item.title,
              date: new Date(item.date * 1000).toISOString(),
              content: item.contents,
              url: item.url,
              author: item.author || "Steam News",
              eventHeader: item.feedlabel || null,
            }));

            // Cache the results
            localStorage.setItem(
              CACHE_KEY,
              JSON.stringify({
                data: updates,
                timestamp: Date.now(),
              })
            );

            displaySteamUpdates(updates);
            return;
          }

          throw new Error("No news data available from Steam News API");
        } catch (error) {
          console.error("Failed to load Steam news updates:", error);
          showSteamError();
        }
      }

      function displaySteamUpdates(updates) {
        const loadingEl = document.getElementById("updates-loading");
        const listEl = document.getElementById("updates-list");

        loadingEl.style.display = "none";
        listEl.style.display = "block";

        const fallbackImgUrl = "media/Logo.png";
        listEl.innerHTML = updates
          .map((update) => {
            // Extract first image from HTML or Steam BBCode [img]...[/img]
            let imgUrl = null;
            const htmlImgMatch = update.content.match(
              /<img[^>]+src=["']([^"']+)["'][^>]*>/i
            );
            const bbcodeImgMatch = update.content.match(
              /\[img\]([^\[]+?)\[\/img\]/i
            );
            if (htmlImgMatch && htmlImgMatch[1]) {
              imgUrl = htmlImgMatch[1];
            } else if (bbcodeImgMatch && bbcodeImgMatch[1]) {
              imgUrl = bbcodeImgMatch[1];
            }
            if (imgUrl && imgUrl.startsWith("//")) {
              imgUrl = "https:" + imgUrl;
            }
            const imgHtml = imgUrl
              ? `<div style="text-align:center;margin-bottom:1em;"><img src="${imgUrl}" alt="Update image" style="max-width:100%;border-radius:8px;box-shadow:0 2px 12px #0003;"></div>`
              : `<div style="text-align:center;margin-bottom:1em;opacity:0.7;"><img src="${fallbackImgUrl}" alt="No update image available" style="max-width:120px;border-radius:8px;box-shadow:0 2px 12px #0001;filter: grayscale(0.2);background:#23262e;padding:0.5em;"></div>`;

            // Remove images from content to avoid duplication
            const contentStripped = update.content
              .replace(/<img[^>]*>/gi, "")
              .replace(/\[img\][\s\S]*?\[\/img\]/gi, "");
            // Add event header if present
            let eventHeaderHtml = "";
            if (update.eventHeader) {
              eventHeaderHtml = `<div class="update-event-header" style="font-size:0.98em;font-weight:600;color:#66c0f4;margin-bottom:0.3em;letter-spacing:0.01em;">${escapeHtml(
                update.eventHeader
              )}</div>`;
            }
            return `
          <div class="update-item">
            <div class="update-header">
              ${eventHeaderHtml}<h3 class="update-title">${escapeHtml(
              update.title
            )}</h3>
              <span class="update-date">${formatDate(update.date)}</span>
            </div>
            ${imgHtml}
            <div class="update-content">${formatUpdateContent(
              contentStripped
            )}</div>
            <div style="margin-top: 0.7em;">
              <a href="${
                update.url
              }" class="steam-link" target="_blank" rel="noopener" style="font-size:0.98em;">
                Read on Steam
              </a>
            </div>
          </div>
        `;
          })
          .join("");

        console.log(`Displayed ${updates.length} Steam news updates`);
      }

      // No longer needed: extractSteamUpdates

      function showSteamError() {
        const loadingEl = document.getElementById("updates-loading");
        const listEl = document.getElementById("updates-list");
        const errorEl = document.getElementById("updates-error");
        const fallbackEl = document.getElementById("updates-fallback");

        loadingEl.style.display = "none";

        // Show clean "no updates available" message instead of error
        listEl.style.display = "block";
        listEl.innerHTML = `
          <div style="text-align: center; padding: 3rem; color: var(--gray-600);">
            <h3 style="margin-bottom: 1rem; color: var(--gray-700);">ðŸ“¡ No Updates Available</h3>
            <p style="margin-bottom: 1.5rem;">We're currently working on connecting to Steam's update feed.</p>
            <p style="font-size: 0.9rem;">Check back soon for the latest development updates!</p>
          </div>
        `;
        console.log("Showing 'no updates available' message");
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric",
        });
      }

      function formatUpdateContent(content) {
        // Convert simple markdown and Steam BBCode to HTML
        return (
          content
            // Bold markdown
            .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>")
            // Bullet formatting
            .replace(/â€¢ /g, "<br>â€¢ ")
            // Steam BBCode image
            .replace(/\[img\]([^\[]+?)\[\/img\]/gi, (_match, url) => {
              const normalized = url.startsWith("//") ? "https:" + url : url;
              return `<div style="text-align:center;margin:0.5em 0;"><img src="${normalized}" alt="Update image" style="max-width:100%;border-radius:8px;box-shadow:0 2px 12px #0003;"></div>`;
            })
            // Steam BBCode URL
            .replace(
              /\[url=([^\]]+)\]([^\[]+)\[\/url\]/gi,
              (_m, href, text) =>
                `<a href="${href}" target="_blank" rel="noopener">${text}</a>`
            )
            // Newlines
            .replace(/\n/g, "<br>")
            .trim()
        );
      }

      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      // ===== PERFORMANCE MONITORING =====
      function logPerformance() {
        if ("performance" in window) {
          window.addEventListener("load", () => {
            setTimeout(() => {
              const perf = performance.getEntriesByType("navigation")[0];
              if (perf) {
                console.log("Page Load Performance:", {
                  "DOM Content Loaded": Math.round(
                    perf.domContentLoadedEventEnd -
                      perf.domContentLoadedEventStart
                  ),
                  "Full Load Time": Math.round(
                    perf.loadEventEnd - perf.loadEventStart
                  ),
                  "DNS Lookup": Math.round(
                    perf.domainLookupEnd - perf.domainLookupStart
                  ),
                  "Connect Time": Math.round(
                    perf.connectEnd - perf.connectStart
                  ),
                });
              }
            }, 0);
          });
        }
      }

      // Initialize Steam updates on page load
      document.addEventListener("DOMContentLoaded", function () {
        logPerformance();
        // Delay loading to prioritize other content
        setTimeout(loadSteamUpdates, 1000);
      });

      // ===== HERO SUBHEADER (Random, Pulsing) =====
      (function initHeroSubheader() {
        const phrases = [
          "Forging legends in the frost",
          "Every seed, a new saga",
          "Quests that remember your choices",
          "Heroes rise, empires fall",
          "Where tales are never the same",
          "A world woven from your will",
          "The north callsâ€”answer it",
          "Chart destiny across endless paths",
          "Stories born of the unexpected",
          "Adventure awaits beyond the snow",
        ];
        const el = document.getElementById("hero-subheader-text");
        if (!el) return;
        const idx = Math.floor(Math.random() * phrases.length);
        el.textContent = phrases[idx];
      })();

      // ===== RESTRICTIONS: Disable context menu and DevTools =====
      // Disable right-click context menu
      document.addEventListener("contextmenu", function (e) {
        e.preventDefault();
      });

      // Block common DevTools shortcuts
      document.addEventListener("keydown", function (e) {
        const key = e.key.toUpperCase();
        const blocked =
          key === "F12" ||
          (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(key)) ||
          (e.ctrlKey && key === "U");
        if (blocked) {
          e.preventDefault();
          e.stopPropagation();
        }
      });

      // Basic DevTools open detection and overlay block
      function isDevToolsOpen() {
        const threshold = 160;
        return (
          window.outerWidth - window.innerWidth > threshold ||
          window.outerHeight - window.innerHeight > threshold
        );
      }

      function showDevToolsBlocker() {
        if (document.getElementById("devtools-blocker")) return;
        const blocker = document.createElement("div");
        blocker.id = "devtools-blocker";
        blocker.setAttribute("role", "dialog");
        blocker.setAttribute("aria-live", "assertive");
        blocker.style.cssText =
          "position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(17,24,39,0.96);backdrop-filter:blur(6px);color:#fff;z-index:10000;display:flex;align-items:center;justify-content:center;text-align:center;padding:2rem;";
        blocker.innerHTML =
          "<div style='max-width:640px'><h2 style='margin-bottom:0.75rem'>Developer tools are disabled</h2><p style='opacity:0.9'>Please close DevTools to continue browsing.</p></div>";
        document.body.appendChild(blocker);
      }

      let devtoolsInterval = setInterval(function () {
        if (isDevToolsOpen()) {
          showDevToolsBlocker();
        } else {
          const blocker = document.getElementById("devtools-blocker");
          if (blocker) blocker.remove();
        }
      }, 1000);
    </script>

    <!-- Service Worker Registration for offline support and caching -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/sw.js")
            .then((registration) => {
              console.log("ServiceWorker registered:", registration.scope);
            })
            .catch((err) => {
              console.log("ServiceWorker registration failed:", err);
            });
        });
      }
    </script>
  </body>
</html>
